<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AETERNA EXPLORER</title>
    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --gold: #D4AF37; --bg: #0a0a0a; --panel: #111; }
        body { background-color: var(--bg); color: #e0e0e0; font-family: 'Courier New', monospace; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: var(--gold); border-bottom: 2px solid var(--gold); padding-bottom: 10px; }
        
        .stats { display: flex; gap: 20px; margin-bottom: 30px; }
        .stat-box { background: var(--panel); padding: 15px; border: 1px solid #333; flex: 1; text-align: center; }
        .stat-val { font-size: 1.5rem; color: #fff; font-weight: bold; }
        
        .block { background: var(--panel); border: 1px solid #333; margin-bottom: 15px; padding: 15px; display: flex; align-items: center; transition: 0.3s; }
        .block:hover { border-color: var(--gold); transform: translateX(5px); }
        
        .block-id { font-size: 1.2rem; color: var(--gold); font-weight: bold; width: 60px; }
        .block-data { flex: 1; padding: 0 20px; }
        .block-hash { font-size: 0.7rem; color: #666; margin-top: 5px; word-break: break-all; }
        .qr-holder { background: #fff; padding: 5px; }
        
        .nav { margin-bottom: 20px; }
        a { color: var(--gold); text-decoration: none; margin-right: 20px; font-weight: bold; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="index.html">‚Üê RETURN TO COMMAND</a>
            <span style="color: #555;"> // </span>
            <span style="color: #00ff00;">LIVE LEDGER</span>
        </div>

        <h1>AETERNA BLOCK EXPLORER</h1>
        
        <div class="stats">
            <div class="stat-box">
                <div id="block-height" class="stat-val">0</div>
                <div>BLOCK HEIGHT</div>
            </div>
            <div class="stat-box">
                <div class="stat-val" style="color: var(--gold);">SHA-256</div>
                <div>CONSENSUS</div>
            </div>
            <div class="stat-box">
                <div class="stat-val" style="color: #00ff00;">ACTIVE</div>
                <div>NETWORK STATUS</div>
            </div>
        </div>

        <div id="chain-container">
            <!-- Blocks load here -->
            <div style="text-align: center; padding: 40px; color: #666;">Loading Immutable Ledger...</div>
        </div>
    </div>

    <script>
        fetch('ledger.json?t=' + new Date().getTime())
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('chain-container');
                document.getElementById('block-height').innerText = data.length;
                container.innerHTML = '';

                // Reverse order to show newest first
                data.slice().reverse().forEach(block => {
                    const div = document.createElement('div');
                    div.className = 'block';
                    
                    // Generate HTML Structure
                    div.innerHTML = `
                        <div class="block-id">#${block.index}</div>
                        <div class="block-data">
                            <div style="color: #fff; font-weight: bold;">${block.data}</div>
                            <div style="color: #888; font-size: 0.8rem;">${block.timestamp}</div>
                            <div class="block-hash">HASH: ${block.hash}</div>
                            <div class="block-hash">PREV: ${block.previous_hash}</div>
                        </div>
                        <div class="qr-holder" id="qr-${block.index}"></div>
                    `;
                    container.appendChild(div);

                    // Generate QR Code
                    new QRCode(document.getElementById(`qr-${block.index}`), {
                        text: block.hash,
                        width: 64,
                        height: 64
                    });
                });
            })
            .catch(err => {
                document.getElementById('chain-container').innerHTML = '<div style="color:red; text-align:center">Ledger Sync Error. Is the node active?</div>';
            });
    </script>
</body>
</html>
